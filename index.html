<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Registro de Cliente / Client Registration</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet"/>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --bg: #0d0d0f; --surface: #141417; --border: #2a2a30;
      --accent: #c9a84c; --accent-dim: rgba(201,168,76,0.12);
      --text: #f0ede6; --muted: #7a7880; --error: #e05f5f; --success: #5fc97a;
    }
    body {
      font-family: 'DM Sans', sans-serif;
      background: var(--bg); color: var(--text);
      min-height: 100vh; display: flex; align-items: center;
      justify-content: center; padding: 2rem; position: relative; overflow-x: hidden;
    }
    body::before {
      content: ''; position: fixed; inset: 0;
      background:
        radial-gradient(ellipse 80% 60% at 10% 20%, rgba(201,168,76,0.06) 0%, transparent 60%),
        radial-gradient(ellipse 60% 50% at 90% 80%, rgba(120,80,200,0.05) 0%, transparent 60%);
      pointer-events: none;
    }

    /* ‚îÄ‚îÄ LANGUAGE GLOBE ‚îÄ‚îÄ */
    .lang-bar { position: fixed; top: 1.2rem; right: 1.5rem; z-index: 200; }
    .lang-globe-btn {
      background: var(--surface); border: 1px solid var(--border);
      color: var(--accent); font-size: 1.3rem;
      width: 42px; height: 42px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      cursor: pointer; transition: all 0.2s;
      box-shadow: 0 0 0 0 rgba(201,168,76,0);
    }
    .lang-globe-btn:hover, .lang-globe-btn.open {
      border-color: var(--accent);
      box-shadow: 0 0 16px rgba(201,168,76,0.25);
    }
    .lang-dropdown {
      position: absolute; top: calc(100% + 0.6rem); right: 0;
      background: #18181e; border: 1px solid var(--border);
      border-radius: 6px; min-width: 210px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.7);
      overflow: hidden;
      opacity: 0; transform: translateY(-8px) scale(0.97);
      pointer-events: none;
      transition: opacity 0.2s, transform 0.2s;
    }
    .lang-dropdown.open {
      opacity: 1; transform: translateY(0) scale(1);
      pointer-events: all;
    }
    .lang-option {
      display: flex; align-items: center; gap: 0.75rem;
      padding: 0.6rem 1rem; cursor: pointer;
      font-size: 0.85rem; color: var(--muted);
      transition: background 0.15s, color 0.15s;
      border-left: 2px solid transparent;
    }
    .lang-option:hover { background: var(--accent-dim); color: var(--text); }
    .lang-option.active { color: var(--accent); border-left-color: var(--accent); background: var(--accent-dim); }
    .lang-option .flag { font-size: 1.1rem; }
    .lang-option .lang-label { display: flex; flex-direction: column; }
    .lang-option .lang-main { font-size: 0.85rem; }
    .lang-option .lang-sub { font-size: 0.68rem; color: var(--muted); opacity: 0.65; }

    /* ‚îÄ‚îÄ CARD ‚îÄ‚îÄ */
    .card {
      background: var(--surface); border: 1px solid var(--border);
      border-radius: 2px; width: 100%; max-width: 520px;
      padding: 3rem 2.5rem; position: relative;
      animation: fadeUp 0.6s ease both;
    }
    .card::before {
      content: ''; position: absolute; top: 0; left: 2rem; right: 2rem; height: 1px;
      background: linear-gradient(90deg, transparent, var(--accent), transparent);
    }
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(24px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    .header { display: flex; align-items: center; gap: 1rem; margin-bottom: 2.5rem; }
    .sphere {
      flex-shrink: 0; width: 54px; height: 54px; border-radius: 50%;
      background: radial-gradient(circle at 35% 35%,
        rgba(201,168,76,0.65) 0%, rgba(201,168,76,0.18) 40%,
        rgba(201,168,76,0.05) 70%, transparent 100%);
      border: 1px solid rgba(201,168,76,0.35);
      box-shadow: inset -5px -5px 14px rgba(0,0,0,0.45), 0 0 22px rgba(201,168,76,0.1);
      position: relative; overflow: hidden;
    }
    .sphere-lh { position:absolute; top:50%; left:0; right:0; height:1px; background:rgba(201,168,76,0.25); transform:translateY(-50%); }
    .sphere-lv { position:absolute; top:0; bottom:0; left:50%; width:1px; background:rgba(201,168,76,0.25); transform:translateX(-50%); }
    .sphere-ring { position:absolute; inset:9px; border-radius:50%; border:1px solid rgba(201,168,76,0.18); }
    .logo { font-family: 'Playfair Display', serif; font-size: 1.65rem; color: var(--accent); letter-spacing: 0.02em; }
    .subtitle { font-size: 0.72rem; color: var(--muted); letter-spacing: 0.12em; text-transform: uppercase; margin-top: 0.2rem; }

    /* ‚îÄ‚îÄ FORM ‚îÄ‚îÄ */
    .field { margin-bottom: 1.2rem; }
    label { display:block; font-size:0.7rem; letter-spacing:0.1em; text-transform:uppercase; color:var(--muted); margin-bottom:0.4rem; }
    input, select {
      width: 100%; background: rgba(255,255,255,0.03);
      border: 1px solid var(--border); border-radius: 2px;
      color: var(--text); font-family: 'DM Sans', sans-serif;
      font-size: 0.9rem; padding: 0.7rem 1rem;
      transition: border-color 0.2s, background 0.2s, box-shadow 0.2s;
      outline: none; appearance: none;
    }
    input::placeholder { color: var(--muted); }
    input:focus, select:focus {
      border-color: var(--accent); background: var(--accent-dim);
      box-shadow: 0 0 0 3px rgba(201,168,76,0.08);
    }
    select option { background: #1a1a20; color: var(--text); }
    .row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
    .date-row { display: grid; grid-template-columns: 1fr 2fr 1fr; gap: 0.4rem; }

    button[type="submit"] {
      width: 100%; padding: 0.85rem; margin-top: 1.5rem;
      background: var(--accent); color: #0d0d0f;
      font-family: 'DM Sans', sans-serif; font-weight: 500;
      font-size: 0.85rem; letter-spacing: 0.1em; text-transform: uppercase;
      border: none; border-radius: 2px; cursor: pointer;
      transition: opacity 0.2s, transform 0.1s;
    }
    button[type="submit"]:hover { opacity: 0.88; }
    button[type="submit"]:active { transform: scale(0.99); }
    button[type="submit"]:disabled { opacity: 0.4; cursor: not-allowed; }
    .spinner {
      display: inline-block; width: 14px; height: 14px;
      border: 2px solid rgba(0,0,0,0.3); border-top-color: #000;
      border-radius: 50%; animation: spin 0.7s linear infinite;
      vertical-align: middle; margin-right: 6px;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    .alert { padding: 0.8rem 1rem; border-radius: 2px; font-size: 0.82rem; margin-top: 1.2rem; display: none; }
    .alert.error   { background:rgba(224,95,95,0.1); border:1px solid rgba(224,95,95,0.3); color:var(--error); }
    .alert.success { background:rgba(95,201,122,0.1); border:1px solid rgba(95,201,122,0.3); color:var(--success); }
    .alert.show    { display:block; animation:fadeUp 0.3s ease; }

    [dir="rtl"] .lang-dropdown { right: auto; left: 0; }
    [dir="rtl"] .lang-option { border-left: none; border-right: 2px solid transparent; }
    [dir="rtl"] .lang-option.active { border-right-color: var(--accent); }

    @media(max-width:480px){
      .card { padding: 2rem 1.5rem; }
      .row  { grid-template-columns: 1fr; }
      .date-row { grid-template-columns: 1fr 1fr; }
      .date-row select:nth-child(2) { grid-column: 1 / -1; order: -1; }
      .lang-bar { top: 0.8rem; right: 0.8rem; }
    }
  </style>
</head>
<body>

<div class="lang-bar">
  <div style="position:relative">
    <button class="lang-globe-btn" id="globeBtn" aria-label="Select language">üåê</button>
    <div class="lang-dropdown" id="langDropdown"></div>
  </div>
</div>

<div class="card">
  <div class="header">
    <div class="sphere">
      <div class="sphere-lh"></div>
      <div class="sphere-lv"></div>
      <div class="sphere-ring"></div>
    </div>
    <div>
      <div class="logo">San Valent√≠n</div>
      <div class="subtitle" id="txt-subtitle"></div>
    </div>
  </div>

  <form id="registroForm" novalidate>
    <div class="field">
      <label id="lbl-name"></label>
      <input type="text" id="name" required />
    </div>
    <div class="field">
      <label id="lbl-email"></label>
      <input type="email" id="email" required />
    </div>
    <div class="row">
      <div class="field">
        <label id="lbl-phone"></label>
        <input type="tel" id="phone" required />
      </div>
      <div class="field">
        <label id="lbl-birth"></label>
        <div class="date-row">
          <select id="birthDay" required></select>
          <select id="birthMonth" required></select>
          <select id="birthYear" required></select>
        </div>
      </div>
    </div>
    <div class="field">
      <label id="lbl-country"></label>
      <select id="country" required></select>
    </div>
    <div class="row">
      <div class="field">
        <label id="lbl-doctype"></label>
        <select id="documentType" required></select>
      </div>
      <div class="field">
        <label id="lbl-docnum"></label>
        <input type="text" id="documentNumber" required />
      </div>
    </div>
    <div id="errorMsg" class="alert error"></div>
    <div id="successMsg" class="alert success"></div>
    <button type="submit" id="submitBtn"></button>
  </form>
</div>

<script>
const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxtwjF7pD3w6s1Vrar1qHRx9we3z7mheaJ3eBu7O0KJD4NWzDQTTDTh2MRe7RSXGrlJ/exec';

const languages = [
  { code:'es', flag:'üá®üá¥', name:'Espa√±ol',   native:'' },
  { code:'en', flag:'üá∫üá∏', name:'English',   native:'' },
  { code:'pt', flag:'üáßüá∑', name:'Portugu√™s', native:'' },
  { code:'fr', flag:'üá´üá∑', name:'Fran√ßais',  native:'' },
  { code:'de', flag:'üá©üá™', name:'Deutsch',   native:'' },
  { code:'it', flag:'üáÆüáπ', name:'Italiano',  native:'' },
  { code:'zh', flag:'üá®üá≥', name:'‰∏≠Êñá',       native:'Chinese' },
  { code:'ar', flag:'üá∏üá¶', name:'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©',   native:'Arabic' },
  { code:'ru', flag:'üá∑üá∫', name:'–†—É—Å—Å–∫–∏–π',   native:'Russian' },
  { code:'ja', flag:'üáØüáµ', name:'Êó•Êú¨Ë™û',     native:'Japanese' },
];

const i18n = {
  es: {
    subtitle:'Registro Internacional de Clientes',
    name:'Nombre Completo', email:'Correo Electr√≥nico', phone:'Tel√©fono',
    birth:'Fecha de Nacimiento', country:'Pa√≠s de Origen', countryDef:'Selecciona un pa√≠s',
    doctype:'Tipo de Documento', doctypeDef:'Selecciona', docnum:'N√∫mero de Documento',
    submit:'Registrarse', loading:'Registrando...',
    errFill:'Por favor, completa todos los campos.',
    errServer:'No se pudo conectar. Intenta de nuevo.',
    success:'¬°Registro exitoso! Bienvenido/a üéâ',
    namePh:'Juan P√©rez', emailPh:'juan@ejemplo.com', phonePh:'+57 300 000 0000',
    dayPh:'D√≠a', monthPh:'Mes', yearPh:'A√±o',
    months:['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'],
    dir:'ltr',
  },
  en: {
    subtitle:'International Client Registration',
    name:'Full Name', email:'Email Address', phone:'Phone Number',
    birth:'Date of Birth', country:'Country of Origin', countryDef:'Select a country',
    doctype:'Document Type', doctypeDef:'Select', docnum:'Document Number',
    submit:'Register', loading:'Registering...',
    errFill:'Please fill in all fields.',
    errServer:'Could not connect. Please try again.',
    success:'Registration successful! Welcome üéâ',
    namePh:'John Doe', emailPh:'john@example.com', phonePh:'+1 555 000 0000',
    dayPh:'Day', monthPh:'Month', yearPh:'Year',
    months:['January','February','March','April','May','June','July','August','September','October','November','December'],
    dir:'ltr',
  },
  pt: {
    subtitle:'Registro Internacional de Clientes',
    name:'Nome Completo', email:'Endere√ßo de E-mail', phone:'Telefone',
    birth:'Data de Nascimento', country:'Pa√≠s de Origem', countryDef:'Selecione um pa√≠s',
    doctype:'Tipo de Documento', doctypeDef:'Selecione', docnum:'N√∫mero do Documento',
    submit:'Registrar', loading:'Registrando...',
    errFill:'Por favor, preencha todos os campos.',
    errServer:'N√£o foi poss√≠vel conectar. Tente novamente.',
    success:'Registro bem-sucedido! Bem-vindo/a üéâ',
    namePh:'Jo√£o Silva', emailPh:'joao@exemplo.com', phonePh:'+55 11 90000-0000',
    dayPh:'Dia', monthPh:'M√™s', yearPh:'Ano',
    months:['Janeiro','Fevereiro','Mar√ßo','Abril','Maio','Junho','Julho','Agosto','Setembro','Outubro','Novembro','Dezembro'],
    dir:'ltr',
  },
  fr: {
    subtitle:'Inscription Internationale des Clients',
    name:'Nom Complet', email:'Adresse E-mail', phone:'T√©l√©phone',
    birth:'Date de Naissance', country:"Pays d'Origine", countryDef:'S√©lectionnez un pays',
    doctype:'Type de Document', doctypeDef:'S√©lectionnez', docnum:'Num√©ro de Document',
    submit:"S'inscrire", loading:'Inscription...',
    errFill:'Veuillez remplir tous les champs.',
    errServer:'Connexion impossible. R√©essayez.',
    success:'Inscription r√©ussie ! Bienvenue üéâ',
    namePh:'Jean Dupont', emailPh:'jean@exemple.fr', phonePh:'+33 6 00 00 00 00',
    dayPh:'Jour', monthPh:'Mois', yearPh:'Ann√©e',
    months:['Janvier','F√©vrier','Mars','Avril','Mai','Juin','Juillet','Ao√ªt','Septembre','Octobre','Novembre','D√©cembre'],
    dir:'ltr',
  },
  de: {
    subtitle:'Internationale Kundenregistrierung',
    name:'Vollst√§ndiger Name', email:'E-Mail-Adresse', phone:'Telefonnummer',
    birth:'Geburtsdatum', country:'Herkunftsland', countryDef:'Land ausw√§hlen',
    doctype:'Dokumententyp', doctypeDef:'Ausw√§hlen', docnum:'Dokumentennummer',
    submit:'Registrieren', loading:'Registrierung...',
    errFill:'Bitte alle Felder ausf√ºllen.',
    errServer:'Verbindung fehlgeschlagen. Erneut versuchen.',
    success:'Registrierung erfolgreich! Willkommen üéâ',
    namePh:'Max M√ºller', emailPh:'max@beispiel.de', phonePh:'+49 151 00000000',
    dayPh:'Tag', monthPh:'Monat', yearPh:'Jahr',
    months:['Januar','Februar','M√§rz','April','Mai','Juni','Juli','August','September','Oktober','November','Dezember'],
    dir:'ltr',
  },
  it: {
    subtitle:'Registrazione Internazionale Clienti',
    name:'Nome Completo', email:'Indirizzo Email', phone:'Telefono',
    birth:'Data di Nascita', country:'Paese di Origine', countryDef:'Seleziona un paese',
    doctype:'Tipo di Documento', doctypeDef:'Seleziona', docnum:'Numero di Documento',
    submit:'Registrati', loading:'Registrazione...',
    errFill:'Si prega di compilare tutti i campi.',
    errServer:'Connessione non riuscita. Riprova.',
    success:'Registrazione avvenuta! Benvenuto/a üéâ',
    namePh:'Mario Rossi', emailPh:'mario@esempio.it', phonePh:'+39 333 000 0000',
    dayPh:'Giorno', monthPh:'Mese', yearPh:'Anno',
    months:['Gennaio','Febbraio','Marzo','Aprile','Maggio','Giugno','Luglio','Agosto','Settembre','Ottobre','Novembre','Dicembre'],
    dir:'ltr',
  },
  zh: {
    subtitle:'ÂõΩÈôÖÂÆ¢Êà∑Ê≥®ÂÜå',
    name:'ÂßìÂêç', email:'ÁîµÂ≠êÈÇÆ‰ª∂', phone:'ÁîµËØùÂè∑Á†Å',
    birth:'Âá∫ÁîüÊó•Êúü', country:'ÂéüÁ±çÂõΩ', countryDef:'ÈÄâÊã©ÂõΩÂÆ∂',
    doctype:'ËØÅ‰ª∂Á±ªÂûã', doctypeDef:'ËØ∑ÈÄâÊã©', docnum:'ËØÅ‰ª∂Âè∑Á†Å',
    submit:'Ê≥®ÂÜå', loading:'Ê≥®ÂÜå‰∏≠...',
    errFill:'ËØ∑Â°´ÂÜôÊâÄÊúâÂ≠óÊÆµ„ÄÇ',
    errServer:'ËøûÊé•Â§±Ë¥•ÔºåËØ∑ÈáçËØï„ÄÇ',
    success:'Ê≥®ÂÜåÊàêÂäüÔºÅÊ¨¢Ëøé üéâ',
    namePh:'Âº†‰ºü', emailPh:'zhang@example.cn', phonePh:'+86 138 0000 0000',
    dayPh:'Êó•', monthPh:'Êúà', yearPh:'Âπ¥',
    months:['1Êúà','2Êúà','3Êúà','4Êúà','5Êúà','6Êúà','7Êúà','8Êúà','9Êúà','10Êúà','11Êúà','12Êúà'],
    dir:'ltr',
  },
  ar: {
    subtitle:'ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿπŸÖŸÑÿßÿ° ÿßŸÑÿØŸàŸÑŸä',
    name:'ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ', email:'ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä', phone:'ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ',
    birth:'ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑŸÖŸäŸÑÿßÿØ', country:'ÿ®ŸÑÿØ ÿßŸÑŸÖŸÜÿ¥ÿ£', countryDef:'ÿßÿÆÿ™ÿ± ÿØŸàŸÑÿ©',
    doctype:'ŸÜŸàÿπ ÿßŸÑŸàÿ´ŸäŸÇÿ©', doctypeDef:'ÿßÿÆÿ™ÿ±', docnum:'ÿ±ŸÇŸÖ ÿßŸÑŸàÿ´ŸäŸÇÿ©',
    submit:'ÿ™ÿ≥ÿ¨ŸäŸÑ', loading:'ÿ¨ÿßÿ±Ÿç ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ...',
    errFill:'Ÿäÿ±ÿ¨Ÿâ ŸÖŸÑÿ° ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÑ.',
    errServer:'ÿ™ÿπÿ∞Ÿëÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ. ÿ≠ÿßŸàŸÑ ŸÖÿ¨ÿØÿØÿßŸã.',
    success:'ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ÿ®ŸÜÿ¨ÿßÿ≠! ŸÖÿ±ÿ≠ÿ®ÿßŸã üéâ',
    namePh:'ŸÖÿ≠ŸÖÿØ ÿ£ÿ≠ŸÖÿØ', emailPh:'mohammed@example.com', phonePh:'+966 50 000 0000',
    dayPh:'ŸäŸàŸÖ', monthPh:'ÿ¥Ÿáÿ±', yearPh:'ÿ≥ŸÜÿ©',
    months:['ŸäŸÜÿßŸäÿ±','ŸÅÿ®ÿ±ÿßŸäÿ±','ŸÖÿßÿ±ÿ≥','ÿ£ÿ®ÿ±ŸäŸÑ','ŸÖÿßŸäŸà','ŸäŸàŸÜŸäŸà','ŸäŸàŸÑŸäŸà','ÿ£ÿ∫ÿ≥ÿ∑ÿ≥','ÿ≥ÿ®ÿ™ŸÖÿ®ÿ±','ÿ£ŸÉÿ™Ÿàÿ®ÿ±','ŸÜŸàŸÅŸÖÿ®ÿ±','ÿØŸäÿ≥ŸÖÿ®ÿ±'],
    dir:'rtl',
  },
  ru: {
    subtitle:'–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤',
    name:'–ü–æ–ª–Ω–æ–µ –∏–º—è', email:'–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞', phone:'–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞',
    birth:'–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è', country:'–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è', countryDef:'–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É',
    doctype:'–¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞', doctypeDef:'–í—ã–±–µ—Ä–∏—Ç–µ', docnum:'–ù–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞',
    submit:'–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è', loading:'–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è...',
    errFill:'–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è.',
    errServer:'–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.',
    success:'–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å üéâ',
    namePh:'–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤', emailPh:'ivan@example.ru', phonePh:'+7 900 000 00 00',
    dayPh:'–î–µ–Ω—å', monthPh:'–ú–µ—Å—è—Ü', yearPh:'–ì–æ–¥',
    months:['–Ø–Ω–≤–∞—Ä—å','–§–µ–≤—Ä–∞–ª—å','–ú–∞—Ä—Ç','–ê–ø—Ä–µ–ª—å','–ú–∞–π','–ò—é–Ω—å','–ò—é–ª—å','–ê–≤–≥—É—Å—Ç','–°–µ–Ω—Ç—è–±—Ä—å','–û–∫—Ç—è–±—Ä—å','–ù–æ—è–±—Ä—å','–î–µ–∫–∞–±—Ä—å'],
    dir:'ltr',
  },
  ja: {
    subtitle:'ÂõΩÈöõ„ÇØ„É©„Ç§„Ç¢„É≥„ÉàÁôªÈå≤',
    name:'Ê∞èÂêç', email:'„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ', phone:'ÈõªË©±Áï™Âè∑',
    birth:'ÁîüÂπ¥ÊúàÊó•', country:'Âá∫Ë∫´ÂõΩ', countryDef:'ÂõΩ„ÇíÈÅ∏Êäû',
    doctype:'Êõ∏È°û„ÅÆÁ®ÆÈ°û', doctypeDef:'ÈÅ∏Êäû', docnum:'Êõ∏È°ûÁï™Âè∑',
    submit:'ÁôªÈå≤„Åô„Çã', loading:'ÁôªÈå≤‰∏≠...',
    errFill:'„Åô„Åπ„Å¶„ÅÆ„Éï„Ç£„Éº„É´„Éâ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
    errServer:'Êé•Á∂ö„Åß„Åç„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ„ÇÇ„ÅÜ‰∏ÄÂ∫¶„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ„ÄÇ',
    success:'ÁôªÈå≤ÂÆå‰∫ÜÔºÅ„Çà„ÅÜ„Åì„Åù üéâ',
    namePh:'Â±±Áî∞Â§™ÈÉé', emailPh:'yamada@example.jp', phonePh:'+81 90 0000 0000',
    dayPh:'Êó•', monthPh:'Êúà', yearPh:'Âπ¥',
    months:['1Êúà','2Êúà','3Êúà','4Êúà','5Êúà','6Êúà','7Êúà','8Êúà','9Êúà','10Êúà','11Êúà','12Êúà'],
    dir:'ltr',
  },
};

const countries = {
  es:['Colombia','M√©xico','Espa√±a','Argentina','Per√∫','Venezuela','Chile','Ecuador','Bolivia','Brasil','Panam√°','Costa Rica','Estados Unidos','Canad√°','Alemania','Francia','Italia','China','Jap√≥n','Arabia Saudita','Rusia','Otro'],
  en:['Colombia','Mexico','Spain','Argentina','Peru','Venezuela','Chile','Ecuador','Bolivia','Brazil','Panama','Costa Rica','United States','Canada','Germany','France','Italy','China','Japan','Saudi Arabia','Russia','Other'],
  pt:['Col√¥mbia','M√©xico','Espanha','Argentina','Peru','Venezuela','Chile','Equador','Bol√≠via','Brasil','Panam√°','Costa Rica','Estados Unidos','Canad√°','Alemanha','Fran√ßa','It√°lia','China','Jap√£o','Ar√°bia Saudita','R√∫ssia','Outro'],
  fr:['Colombie','Mexique','Espagne','Argentine','P√©rou','Venezuela','Chili','√âquateur','Bolivie','Br√©sil','Panama','Costa Rica','√âtats-Unis','Canada','Allemagne','France','Italie','Chine','Japon','Arabie saoudite','Russie','Autre'],
  de:['Kolumbien','Mexiko','Spanien','Argentinien','Peru','Venezuela','Chile','Ecuador','Bolivien','Brasilien','Panama','Costa Rica','USA','Kanada','Deutschland','Frankreich','Italien','China','Japan','Saudi-Arabien','Russland','Andere'],
  it:['Colombia','Messico','Spagna','Argentina','Per√π','Venezuela','Cile','Ecuador','Bolivia','Brasile','Panama','Costa Rica','Stati Uniti','Canada','Germania','Francia','Italia','Cina','Giappone','Arabia Saudita','Russia','Altro'],
  zh:['Âì•‰º¶ÊØî‰∫ö','Â¢®Ë•øÂì•','Ë•øÁè≠Áâô','ÈòøÊ†πÂª∑','ÁßòÈ≤Å','ÂßîÂÜÖÁëûÊãâ','Êô∫Âà©','ÂéÑÁìúÂ§öÂ∞î','ÁéªÂà©Áª¥‰∫ö','Â∑¥Ë•ø','Â∑¥ÊãøÈ©¨','Âì•ÊñØËææÈªéÂä†','ÁæéÂõΩ','Âä†ÊãøÂ§ß','Âæ∑ÂõΩ','Ê≥ïÂõΩ','ÊÑèÂ§ßÂà©','‰∏≠ÂõΩ','Êó•Êú¨','Ê≤ôÁâπÈòøÊãâ‰ºØ','‰øÑÁΩóÊñØ','ÂÖ∂‰ªñ'],
  ar:['ŸÉŸàŸÑŸàŸÖÿ®Ÿäÿß','ÿßŸÑŸÖŸÉÿ≥ŸäŸÉ','ÿ•ÿ≥ÿ®ÿßŸÜŸäÿß','ÿßŸÑÿ£ÿ±ÿ¨ŸÜÿ™ŸäŸÜ','ÿ®Ÿäÿ±Ÿà','ŸÅŸÜÿ≤ŸàŸäŸÑÿß','ÿ™ÿ¥ŸäŸÑŸä','ÿßŸÑÿ•ŸÉŸàÿßÿØŸàÿ±','ÿ®ŸàŸÑŸäŸÅŸäÿß','ÿßŸÑÿ®ÿ±ÿßÿ≤ŸäŸÑ','ÿ®ŸÜŸÖÿß','ŸÉŸàÿ≥ÿ™ÿßÿ±ŸäŸÉÿß','ÿßŸÑŸàŸÑÿßŸäÿßÿ™ ÿßŸÑŸÖÿ™ÿ≠ÿØÿ©','ŸÉŸÜÿØÿß','ÿ£ŸÑŸÖÿßŸÜŸäÿß','ŸÅÿ±ŸÜÿ≥ÿß','ÿ•Ÿäÿ∑ÿßŸÑŸäÿß','ÿßŸÑÿµŸäŸÜ','ÿßŸÑŸäÿßÿ®ÿßŸÜ','ÿßŸÑŸÖŸÖŸÑŸÉÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ© ÿßŸÑÿ≥ÿπŸàÿØŸäÿ©','ÿ±Ÿàÿ≥Ÿäÿß','ÿ£ÿÆÿ±Ÿâ'],
  ru:['–ö–æ–ª—É–º–±–∏—è','–ú–µ–∫—Å–∏–∫–∞','–ò—Å–ø–∞–Ω–∏—è','–ê—Ä–≥–µ–Ω—Ç–∏–Ω–∞','–ü–µ—Ä—É','–í–µ–Ω–µ—Å—É—ç–ª–∞','–ß–∏–ª–∏','–≠–∫–≤–∞–¥–æ—Ä','–ë–æ–ª–∏–≤–∏—è','–ë—Ä–∞–∑–∏–ª–∏—è','–ü–∞–Ω–∞–º–∞','–ö–æ—Å—Ç–∞-–†–∏–∫–∞','–°–®–ê','–ö–∞–Ω–∞–¥–∞','–ì–µ—Ä–º–∞–Ω–∏—è','–§—Ä–∞–Ω—Ü–∏—è','–ò—Ç–∞–ª–∏—è','–ö–∏—Ç–∞–π','–Ø–ø–æ–Ω–∏—è','–°–∞—É–¥–æ–≤—Å–∫–∞—è –ê—Ä–∞–≤–∏—è','–†–æ—Å—Å–∏—è','–î—Ä—É–≥–æ–µ'],
  ja:['„Ç≥„É≠„É≥„Éì„Ç¢','„É°„Ç≠„Ç∑„Ç≥','„Çπ„Éö„Ç§„É≥','„Ç¢„É´„Çº„É≥„ÉÅ„É≥','„Éö„É´„Éº','„Éô„Éç„Ç∫„Ç®„É©','„ÉÅ„É™','„Ç®„ÇØ„Ç¢„Éâ„É´','„Éú„É™„Éì„Ç¢','„Éñ„É©„Ç∏„É´','„Éë„Éä„Éû','„Ç≥„Çπ„Çø„É™„Ç´','„Ç¢„É°„É™„Ç´','„Ç´„Éä„ÉÄ','„Éâ„Ç§„ÉÑ','„Éï„É©„É≥„Çπ','„Ç§„Çø„É™„Ç¢','‰∏≠ÂõΩ','Êó•Êú¨','„Çµ„Ç¶„Ç∏„Ç¢„É©„Éì„Ç¢','„É≠„Ç∑„Ç¢','„Åù„ÅÆ‰ªñ'],
};

const docTypes = {
  'Colombia':        ['C√©dula de Ciudadan√≠a','Pasaporte','C√©dula Extranjer√≠a'],
  'M√©xico':          ['RFC','INE','Pasaporte'],
  'Mexico':          ['RFC','INE','Pasaporte'],
  'Espa√±a':          ['DNI','Pasaporte'],
  'Spain':           ['DNI','Passport'],
  'Espagne':         ['DNI','Passeport'],
  'Spanien':         ['Personalausweis','Reisepass'],
  'Argentina':       ['DNI','Pasaporte'],
  'Brasil':          ['CPF','RG','Passaporte'],
  'Brazil':          ['CPF','RG','Passport'],
  'Estados Unidos':  ['Social Security Number',"Driver's License",'Passport'],
  'United States':   ['Social Security Number',"Driver's License",'Passport'],
  '–°–®–ê':             ['–ü–∞—Å–ø–æ—Ä—Ç','–í–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–∞–≤–∞'],
  'default':         ['Passport / Pasaporte','ID / C√©dula','DNI','Other / Otro'],
};

let lang = 'es';

// Build globe dropdown
const dropdown = document.getElementById('langDropdown');
dropdown.innerHTML = languages.map(l => `
  <div class="lang-option" data-code="${l.code}" onclick="setLang('${l.code}')">
    <span class="flag">${l.flag}</span>
    <span class="lang-label">
      <span class="lang-main">${l.name}</span>
      ${l.native ? `<span class="lang-sub">${l.native}</span>` : ''}
    </span>
  </div>`).join('');

const globeBtn = document.getElementById('globeBtn');
globeBtn.addEventListener('click', e => {
  e.stopPropagation();
  const open = dropdown.classList.toggle('open');
  globeBtn.classList.toggle('open', open);
});
document.addEventListener('click', () => {
  dropdown.classList.remove('open');
  globeBtn.classList.remove('open');
});

function setLang(l) {
  lang = l;
  const t = i18n[l];
  document.documentElement.lang = l;
  document.documentElement.dir  = t.dir;

  document.getElementById('txt-subtitle').textContent = t.subtitle;
  document.getElementById('lbl-name').textContent     = t.name;
  document.getElementById('lbl-email').textContent    = t.email;
  document.getElementById('lbl-phone').textContent    = t.phone;
  document.getElementById('lbl-birth').textContent    = t.birth;
  document.getElementById('lbl-country').textContent  = t.country;
  document.getElementById('lbl-doctype').textContent  = t.doctype;
  document.getElementById('lbl-docnum').textContent   = t.docnum;
  document.getElementById('submitBtn').textContent    = t.submit;
  document.getElementById('name').placeholder         = t.namePh;
  document.getElementById('email').placeholder        = t.emailPh;
  document.getElementById('phone').placeholder        = t.phonePh;

  document.querySelectorAll('.lang-option').forEach(el =>
    el.classList.toggle('active', el.dataset.code === l));

  dropdown.classList.remove('open');
  globeBtn.classList.remove('open');

  buildDateSelects();
  buildCountrySelect();
}

function buildDateSelects() {
  const t = i18n[lang];
  const dayEl   = document.getElementById('birthDay');
  const monthEl = document.getElementById('birthMonth');
  const yearEl  = document.getElementById('birthYear');
  const sd = dayEl.value, sm = monthEl.value, sy = yearEl.value;

  dayEl.innerHTML = `<option value="">${t.dayPh}</option>`;
  for (let d = 1; d <= 31; d++) {
    const o = document.createElement('option');
    o.value = String(d).padStart(2,'0'); o.textContent = d;
    if (o.value === sd) o.selected = true;
    dayEl.appendChild(o);
  }
  monthEl.innerHTML = `<option value="">${t.monthPh}</option>`;
  t.months.forEach((m,i) => {
    const o = document.createElement('option');
    o.value = String(i+1).padStart(2,'0'); o.textContent = m;
    if (o.value === sm) o.selected = true;
    monthEl.appendChild(o);
  });
  yearEl.innerHTML = `<option value="">${t.yearPh}</option>`;
  const cy = new Date().getFullYear();
  for (let y = cy; y >= 1920; y--) {
    const o = document.createElement('option');
    o.value = y; o.textContent = y;
    if (String(y) === sy) o.selected = true;
    yearEl.appendChild(o);
  }
}

function buildCountrySelect() {
  const t = i18n[lang];
  const sel = document.getElementById('country');
  const saved = sel.value;
  sel.innerHTML = `<option value="">${t.countryDef}</option>`;
  (countries[lang] || countries['es']).forEach(c => {
    const o = document.createElement('option');
    o.value = c; o.textContent = c;
    if (c === saved) o.selected = true;
    sel.appendChild(o);
  });
  buildDocTypeSelect();
}

function buildDocTypeSelect() {
  const t = i18n[lang];
  const country = document.getElementById('country').value;
  const types = docTypes[country] || docTypes['default'];
  const sel = document.getElementById('documentType');
  sel.innerHTML = `<option value="">${t.doctypeDef}</option>`;
  types.forEach(dt => {
    const o = document.createElement('option');
    o.value = dt; o.textContent = dt; sel.appendChild(o);
  });
}

document.getElementById('country').addEventListener('change', buildDocTypeSelect);

document.getElementById('registroForm').addEventListener('submit', async e => {
  e.preventDefault();
  const t = i18n[lang];
  document.getElementById('errorMsg').classList.remove('show');
  document.getElementById('successMsg').classList.remove('show');

  const day   = document.getElementById('birthDay').value;
  const month = document.getElementById('birthMonth').value;
  const year  = document.getElementById('birthYear').value;
  const birthDate = (day && month && year) ? `${year}-${month}-${day}` : '';

  const data = {
    name:           document.getElementById('name').value.trim(),
    email:          document.getElementById('email').value.trim(),
    phone:          document.getElementById('phone').value.trim(),
    birthDate,
    country:        document.getElementById('country').value,
    documentType:   document.getElementById('documentType').value,
    documentNumber: document.getElementById('documentNumber').value.trim(),
    language:       lang,
  };

  if (Object.values(data).some(v => !v)) {
    const el = document.getElementById('errorMsg');
    el.textContent = '‚úó ' + t.errFill;
    el.classList.add('show'); return;
  }

  const btn = document.getElementById('submitBtn');
  btn.disabled = true;
  btn.innerHTML = `<span class="spinner"></span> ${t.loading}`;

  try {
    const form = new FormData();
    Object.entries(data).forEach(([k,v]) => form.append(k,v));
    await fetch(SCRIPT_URL, { method:'POST', body:form, mode:'no-cors' });
    const el = document.getElementById('successMsg');
    el.textContent = '‚úì ' + t.success;
    el.classList.add('show');
    document.getElementById('registroForm').reset();
    buildDateSelects();
    buildCountrySelect();
  } catch {
    const el = document.getElementById('errorMsg');
    el.textContent = '‚úó ' + t.errServer;
    el.classList.add('show');
  } finally {
    btn.disabled = false;
    btn.textContent = t.submit;
  }
});

// Init
setLang('es');
</script>
</body>
</html>
